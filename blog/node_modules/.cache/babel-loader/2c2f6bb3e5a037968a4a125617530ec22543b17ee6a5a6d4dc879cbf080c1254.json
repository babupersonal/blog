{"ast":null,"code":"var _jsxFileName = \"/Users/babu/Desktop/client/blog/src/App.js\",\n  _s = $RefreshSig$();\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport './App.css';\nimport React, { useEffect, useState } from 'react';\nimport { Octokit } from '@octokit/core';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faGear } from '@fortawesome/free-solid-svg-icons';\nimport Markdown from 'marked-react';\nimport throttle from 'lodash/throttle';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst fs = require('fs');\nconst envData = fs.readFileSync('.env', 'utf8');\nconst envLines = envData.split('\\n');\nconst envVars = {};\nenvLines.forEach(line => {\n  const [key, value] = line.split('=');\n  envVars[key.trim()] = value.trim();\n});\nconst PersonalAccessToken = envVars.PERSONAL_ACCESS_TOKEN;\nconst CLIENT_ID = 'Iv1.5f95480a214aafea';\nconst PER_PAGE = 10;\n// const PersonalAccessToken = process.env.personalToken;\n// const PersonalAccessToken = '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';\n\nfunction App() {\n  _s();\n  const [rerender, setRerender] = useState(false);\n  const [userData, setUserData] = useState({});\n  const [repositories, setRepositories] = useState([]);\n  //issue\n  const [issue, setIssue] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [repoName, setRepoName] = useState('');\n  const [owner, setOwner] = useState('');\n  const [editedTitle, setEditedTitle] = useState('');\n  const [editedContent, setEditedContent] = useState('');\n  const [editingIssueId, setEditingIssueId] = useState();\n  const [author_association, setAuthorAssociation] = useState();\n  //add issue\n  const [showForm, setShowForm] = useState(false);\n  const [title, setTitle] = useState('');\n  const [content, setContent] = useState('');\n  useEffect(() => {\n    const queryString = window.location.search;\n    const urlParams = new URLSearchParams(queryString);\n    const codeParam = urlParams.get(\"code\");\n    if (codeParam && localStorage.getItem(\"accessToken\") === null) {\n      async function getAccessToken() {\n        await fetch('http://localhost:4000/getAccessToken?code=' + codeParam, {\n          method: 'GET'\n        }).then(response => {\n          // console.log(response);\n          return response.json();\n        }).then(data => {\n          // console.log(data);\n          if (data.access_token) {\n            localStorage.setItem('accessToken', data.access_token);\n            setRerender(!rerender);\n          }\n        });\n      }\n      getAccessToken();\n    } else {\n      getUserData();\n    }\n  }, []); //rerender\n\n  useEffect(() => {\n    if (localStorage.getItem('accessToken')) {\n      getUserData();\n    }\n  }, [localStorage.getItem('accessToken')]);\n\n  // const getUserData = async () => {\n  //   try {\n  //     const accessToken = localStorage.getItem('accessToken');\n  //     const response = await fetch(`http://localhost:4000/getUserData`, {\n  //       method: 'GET',\n  //       headers: {\n  //         'Authorization': `Bearer ${accessToken}`\n  //       }\n  //     });\n  //     const data = await response.json();\n  //     const octokit = new Octokit({ auth: accessToken });\n  //     const repositoriesResponse = await octokit.request('GET /user/repos');\n  //     setRepositories(repositoriesResponse.data);\n  //     setUserData(data);\n  //   } catch (error) {\n  //     handleError(error);\n  //   }\n  // };\n  const getUserData = async () => {\n    try {\n      const accessToken = localStorage.getItem('accessToken');\n      const response = await fetch(`http://localhost:4000/getUserData`, {\n        method: 'GET',\n        headers: {\n          'Authorization': `Bearer ${accessToken}`\n        }\n      });\n      const data = await response.json();\n      const octokit = new Octokit({\n        auth: accessToken\n      });\n      const repositoriesResponse = await octokit.request('GET /users/:username/repos', {\n        username: 'babupersonal'\n      });\n      setRepositories(repositoriesResponse.data);\n      setUserData(data);\n    } catch (error) {\n      handleError(error);\n    }\n  };\n  const getIssues = async (repoName, owner) => {\n    try {\n      const accessToken = localStorage.getItem('accessToken');\n      const octokit = new Octokit({\n        auth: accessToken\n      });\n      const issueResponse = await octokit.request(`GET /repos/${owner}/${repoName}/issues`, {\n        per_page: PER_PAGE\n      });\n      for (const issueItem of issueResponse.data) {\n        const commentsResponse = await octokit.request(`GET /repos/${owner}/${repoName}/issues/${issueItem.number}/comments`);\n        const comments = commentsResponse.data.filter(comment => comment.body); // 排除空评论\n        issueItem.comments = comments;\n        issueItem.body = issueItem.body; // 将评论内容赋值给 body\n      }\n      const filteredIssues = issueResponse.data.map(issueItem => ({\n        ...issueItem,\n        comments: issueItem.comments.filter(comment => comment.body.trim() !== '')\n      }));\n      setIssue(prevIssue => [...prevIssue, ...filteredIssues]);\n      setLoading(false);\n    } catch (error) {\n      handleError(error);\n    }\n  };\n\n  //滾輪偵測文章載入\n  const handleScroll = throttle(async e => {\n    const container = e.target;\n    const bottom = container.scrollHeight - container.scrollTop === container.clientHeight;\n    if (bottom && !loading && owner && repoName) {\n      setLoading(true);\n      const accessToken = localStorage.getItem('accessToken');\n      const octokit = new Octokit({\n        auth: accessToken\n      });\n      try {\n        const repoInfoResponse = await octokit.request(`GET /repos/${owner}/${repoName}`);\n        const totalIssues = repoInfoResponse.data.open_issues_count;\n        const currentIssuesCount = issue.length;\n        if (currentIssuesCount >= totalIssues) {\n          setLoading(false);\n          return;\n        }\n        const nextPage = Math.ceil(currentIssuesCount / PER_PAGE) + 1;\n        const issueResponse = await octokit.request(`GET /repos/${owner}/${repoName}/issues`, {\n          per_page: PER_PAGE,\n          page: nextPage\n        });\n        const newIssues = issueResponse.data.map(issueItem => ({\n          ...issueItem,\n          comments: []\n        }));\n        // console.log(totalIssues);\n        // console.log(currentIssuesCount);\n        // console.log(nextPage);\n\n        setIssue(prevIssue => [...prevIssue, ...newIssues]);\n        setLoading(false);\n      } catch (error) {\n        console.error('Error fetching additional issues:', error);\n        setLoading(false);\n      }\n    }\n  }, 500);\n  const parseMarkdown = markdownContent => {\n    return markdownContent;\n  };\n  function logingithub() {\n    window.location.assign(`https://github.com/login/oauth/authorize?client_id=${CLIENT_ID}&scope=repo%20read:user%20write:discussion%20repo:status%20write:repo`);\n  }\n  const handleError = error => {\n    console.error('Error:', error);\n  };\n  // 删除文章\n  // const DeleteIssue = async (issueId) => {\n  //   if (window.confirm('Are you sure you want to delete this issue?')) {\n  //     try {\n  //       const editedIssue = issue.find(item => item.id === issueId);\n  //       if (!editedIssue) {\n  //         console.error('Edited issue not found in the issue array.');\n  //         return;\n  //       }\n  //       const accessToken = localStorage.getItem('accessToken');\n  //       const octokit = new Octokit({ auth: accessToken });\n\n  //       // 使用 GitHub REST API 删除 Issue\n  //       await octokit.request(`DELETE /repos/${owner}/${repoName}/issues/${editedIssue.number}`, {\n  //         headers: {\n  //           Authorization: `token ${accessToken}`\n  //         }\n  //       });\n\n  //       // 从 issue 状态中移除被删除的 Issue\n  //       setIssue(prevIssue => prevIssue.filter(issueItem => issueItem.id !== issueId));\n  //     } catch (error) {\n  //       handleError(error);\n  //     }\n  //   }\n  // }\n  //編輯文章\n  const EditingCompleted = async (id, title, content) => {\n    const editedIssue = issue.find(item => item.id === id);\n    if (!editedIssue) return;\n    if (!title.trim()) {\n      window.confirm('請輸入標題');\n      return;\n    }\n    if (content.trim().length < 30) {\n      window.confirm('至少輸入30個字元');\n      return;\n    }\n    if (editedIssue.title === title && editedIssue.body === content) {\n      setEditingIssueId(null);\n      return;\n    }\n    try {\n      const accessToken = PersonalAccessToken;\n      if (!accessToken) {\n        console.error('Access token not found.');\n        return;\n      }\n      const octokit = new Octokit({\n        auth: accessToken\n      });\n      if (!owner || !repoName) {\n        console.error('Owner or repoName not found.');\n        return;\n      }\n      if (editedIssue.author_association === \"OWNER\") {\n        const response = await octokit.request(`PATCH /repos/${owner}/${repoName}/issues/${editedIssue.number}`, {\n          title: title,\n          body: content\n        });\n\n        // 输出编辑成功的信息\n        console.log('Editing completed successfully:', response.data);\n\n        // 更新 issue 状态中对应 Issue 的内容\n        setIssue(prevIssue => {\n          return prevIssue.map(issueItem => {\n            if (issueItem.id === editedIssue.id) {\n              return {\n                ...issueItem,\n                title: title,\n                body: content\n              };\n            }\n            return issueItem;\n          });\n        });\n        setEditingIssueId(null);\n      }\n    } catch (error) {\n      handleError(error);\n    }\n  };\n\n  //  取消編輯\n  const CancelEdit = async () => {\n    setEditingIssueId(null);\n  };\n  //新增文章\n  const handleSubmit = async () => {\n    try {\n      const accessToken = PersonalAccessToken;\n      console.log(accessToken);\n      if (!accessToken) {\n        console.error('Access token not found.');\n        return;\n      }\n      const selectedRepo = repositories.find(repo => repo.name === repoName);\n      if (!selectedRepo) {\n        console.error(`Repository with name ${repoName} not found.`);\n        return;\n      }\n      if (!title.trim()) {\n        window.confirm('請輸入標題');\n        return;\n      }\n      if (content.trim().length < 30) {\n        window.confirm('至少輸入30個字元');\n        return;\n      }\n      const newIssue = {\n        title: title,\n        body: content,\n        comments: []\n      };\n      const url = `https://api.github.com/repos/${owner}/${repoName}/issues`;\n      const response = await fetch(url, {\n        method: 'POST',\n        headers: {\n          'Authorization': `Bearer ${accessToken}`,\n          'Content-Type': 'application/json',\n          'Accept': 'application/json'\n        },\n        body: JSON.stringify(newIssue)\n      });\n      const responseData = await response.json();\n      if (response.ok) {\n        console.log('Issue created successfully:', responseData);\n        setIssue(prevIssue => [responseData, ...prevIssue]);\n        setTitle('');\n        setContent('');\n      } else {\n        console.error(responseData);\n      }\n    } catch (error) {\n      handleError(error);\n    }\n  };\n  const [isOpen, setIsOpen] = useState(false); // 初始化 isOpen 和 setIsOpen\n\n  const toggleMenu = () => {\n    setIsOpen(!isOpen);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"App\",\n    children: /*#__PURE__*/_jsxDEV(\"header\", {\n      className: \"App-header\",\n      children: localStorage.getItem('accessToken') ? /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n          className: `setting ${isOpen ? 'rotate' : ''}`,\n          onClick: toggleMenu,\n          icon: faGear\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 349,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: `menu ${isOpen ? 'open' : ''}`,\n          children: /*#__PURE__*/_jsxDEV(\"nav\", {\n            className: \"c cc\",\n            children: /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => {\n                localStorage.removeItem('accessToken');\n                setRerender(!rerender);\n              },\n              children: \"Log out\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 356,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 355,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 354,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            className: \"py-4\",\n            children: \"Welcome babupersonal Repositories:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 360,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"repo\",\n            children: repositories.length > 0 && repositories.map((repo, index) => /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"repo-list\",\n              onClick: () => {\n                setIssue([]);\n                const selectedRepo = repositories[index]; // 获取所选仓库\n                setRepoName(selectedRepo.name); // 更新所选仓库的名称状态\n                setOwner(selectedRepo.owner.login); // 更新所选仓库的所有者状态\n                getIssues(selectedRepo.name, selectedRepo.owner.login);\n                setShowForm(true);\n              },\n              children: repo.name\n            }, index, false, {\n              fileName: _jsxFileName,\n              lineNumber: 363,\n              columnNumber: 17\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 361,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 359,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"c py-3\",\n          children: /*#__PURE__*/_jsxDEV(\"h3\", {\n            children: repoName ? `${repoName} Issue:` : 'Issue'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 381,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 380,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"issue-list\",\n          onScroll: handleScroll,\n          children: [issue.length > 0 ? issue.map((issueItem, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"issues\",\n            children: editingIssueId === issueItem.id ? /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"issue-column\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"c col-12\",\n                children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                  className: \"col-lg-3\",\n                  children: \"Issue Title\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 390,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n                  className: \"issue-area col-lg-9\",\n                  value: editingIssueId === issueItem.id ? editedTitle : issueItem.title,\n                  onChange: e => {\n                    if (editingIssueId === issueItem.id) {\n                      setEditedTitle(e.target.value);\n                    } else {\n                      setIssue(prevIssue => {\n                        return prevIssue.map(item => {\n                          if (item.id === issueItem.id) {\n                            return {\n                              ...item,\n                              title: e.target.value\n                            };\n                          }\n                          return item;\n                        });\n                      });\n                    }\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 391,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 389,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"c col-12\",\n                children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                  className: \"col-lg-3\",\n                  children: \"Issue Content\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 411,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n                  className: \"issue-area col-lg-9\",\n                  value: editingIssueId === issueItem.id ? editedContent : issueItem.body,\n                  onChange: e => {\n                    if (editingIssueId === issueItem.id) {\n                      setEditedContent(e.target.value);\n                    } else {\n                      setIssue(prevIssue => {\n                        return prevIssue.map(item => {\n                          if (item.id === issueItem.id) {\n                            return {\n                              ...item,\n                              body: e.target.value\n                            };\n                          }\n                          return item;\n                        });\n                      });\n                    }\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 412,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 410,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"c\",\n                children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"btn issue-btn\",\n                  onClick: () => EditingCompleted(issueItem.id, editedTitle, editedContent),\n                  children: \"\\u5B8C\\u6210\\u7DE8\\u8F2F\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 432,\n                  columnNumber: 27\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"btn issue-btn\",\n                  onClick: () => CancelEdit(issueItem.id),\n                  children: \"\\u53D6\\u6D88\\u7DE8\\u8F2F\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 433,\n                  columnNumber: 27\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 431,\n                columnNumber: 25\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 388,\n              columnNumber: 21\n            }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"c issue-out\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"c cc w-100\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"issue-title\",\n                  children: /*#__PURE__*/_jsxDEV(Markdown, {\n                    children: parseMarkdown(`${index + 1}: ${issueItem.title}`)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 439,\n                    columnNumber: 54\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 439,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"c w-100\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"issue-content\",\n                    children: /*#__PURE__*/_jsxDEV(Markdown, {\n                      children: parseMarkdown(`${issueItem.body}`)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 441,\n                      columnNumber: 58\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 441,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"issue-msg-out\",\n                    children: /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"issue-msg\",\n                      children: issueItem.comments && issueItem.comments.map((comment, commentIndex) => comment.body.trim() !== '' && /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"msg-list\",\n                        children: /*#__PURE__*/_jsxDEV(Markdown, {\n                          children: parseMarkdown(comment.body)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 445,\n                          columnNumber: 108\n                        }, this)\n                      }, commentIndex, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 445,\n                        columnNumber: 63\n                      }, this))\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 443,\n                      columnNumber: 29\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 442,\n                    columnNumber: 27\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 440,\n                  columnNumber: 25\n                }, this), issueItem.author_association === \"OWNER\" && userData.login === \"babupersonal\" && /*#__PURE__*/_jsxDEV(_Fragment, {\n                  children: /*#__PURE__*/_jsxDEV(\"button\", {\n                    className: \"btn issue-btn\",\n                    onClick: () => {\n                      setEditedTitle(issueItem.title);\n                      setEditedContent(issueItem.body);\n                      setEditingIssueId(issueItem.id);\n                    },\n                    children: \"\\u7DE8\\u8F2F\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 452,\n                    columnNumber: 27\n                  }, this)\n                }, void 0, false)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 438,\n                columnNumber: 23\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 437,\n              columnNumber: 21\n            }, this)\n          }, index, false, {\n            fileName: _jsxFileName,\n            lineNumber: 386,\n            columnNumber: 17\n          }, this)) : /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"No issues\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 466,\n            columnNumber: 15\n          }, this), loading && /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"Loading...\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 468,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 383,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"add-issue\",\n          children: issue.some(issueItem => issueItem.author_association === \"OWNER\" && userData.login === \"babupersonal\" && showForm) && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"c cc\",\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              className: \"py-3\",\n              children: [\"Add a new \", repoName, \" Issue\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 474,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n              placeholder: \"\\u8F38\\u5165\\u6A19\\u984C\",\n              value: title,\n              onChange: e => setTitle(e.target.value)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 475,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n              placeholder: \"\\u8F38\\u5165\\u5167\\u5BB9\",\n              value: content,\n              onChange: e => setContent(e.target.value)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 480,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"btn issue-btn\",\n                type: \"button\",\n                onClick: handleSubmit,\n                children: \"\\u65B0\\u589E\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 486,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 485,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 473,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 471,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"login-img\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"effect c\",\n            children: /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"btn\",\n              onClick: logingithub,\n              children: \"Login With Github\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 499,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 498,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 497,\n          columnNumber: 13\n        }, this)\n      }, void 0, false)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 346,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 345,\n    columnNumber: 5\n  }, this);\n}\n_s(App, \"OCW4kiwGuSd5+d5j1O7LNk21H+E=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useEffect","useState","Octokit","FontAwesomeIcon","faGear","Markdown","throttle","jsxDEV","_jsxDEV","Fragment","_Fragment","fs","require","envData","readFileSync","envLines","split","envVars","forEach","line","key","value","trim","PersonalAccessToken","PERSONAL_ACCESS_TOKEN","CLIENT_ID","PER_PAGE","App","_s","rerender","setRerender","userData","setUserData","repositories","setRepositories","issue","setIssue","loading","setLoading","repoName","setRepoName","owner","setOwner","editedTitle","setEditedTitle","editedContent","setEditedContent","editingIssueId","setEditingIssueId","author_association","setAuthorAssociation","showForm","setShowForm","title","setTitle","content","setContent","queryString","window","location","search","urlParams","URLSearchParams","codeParam","get","localStorage","getItem","getAccessToken","fetch","method","then","response","json","data","access_token","setItem","getUserData","accessToken","headers","octokit","auth","repositoriesResponse","request","username","error","handleError","getIssues","issueResponse","per_page","issueItem","commentsResponse","number","comments","filter","comment","body","filteredIssues","map","prevIssue","handleScroll","e","container","target","bottom","scrollHeight","scrollTop","clientHeight","repoInfoResponse","totalIssues","open_issues_count","currentIssuesCount","length","nextPage","Math","ceil","page","newIssues","console","parseMarkdown","markdownContent","logingithub","assign","EditingCompleted","id","editedIssue","find","item","confirm","log","CancelEdit","handleSubmit","selectedRepo","repo","name","newIssue","url","JSON","stringify","responseData","ok","isOpen","setIsOpen","toggleMenu","className","children","onClick","icon","fileName","_jsxFileName","lineNumber","columnNumber","removeItem","index","login","onScroll","onChange","commentIndex","some","placeholder","type","_c","$RefreshReg$"],"sources":["/Users/babu/Desktop/client/blog/src/App.js"],"sourcesContent":["import 'bootstrap/dist/css/bootstrap.min.css';\nimport './App.css';\nimport React, { useEffect, useState } from 'react';\nimport { Octokit } from '@octokit/core';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faGear } from '@fortawesome/free-solid-svg-icons';\nimport Markdown from 'marked-react';\nimport throttle from 'lodash/throttle';\n\nconst fs = require('fs');\nconst envData = fs.readFileSync('.env', 'utf8');\nconst envLines = envData.split('\\n');\nconst envVars = {};\nenvLines.forEach(line => {\n    const [key, value] = line.split('=');\n    envVars[key.trim()] = value.trim();\n});\nconst PersonalAccessToken = envVars.PERSONAL_ACCESS_TOKEN;\n\nconst CLIENT_ID = 'Iv1.5f95480a214aafea';\nconst PER_PAGE = 10;\n// const PersonalAccessToken = process.env.personalToken;\n// const PersonalAccessToken = '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';\n\nfunction App() {\n\n  const [rerender, setRerender] = useState(false);\n  const [userData, setUserData] = useState({});\n  const [repositories, setRepositories] = useState([]);\n  //issue\n  const [issue, setIssue] = useState([]);\n  const [loading, setLoading] = useState(false); \n  const [repoName, setRepoName] = useState('');\n  const [owner, setOwner] = useState('');\n  const [editedTitle, setEditedTitle] = useState('');\n  const [editedContent, setEditedContent] = useState('');\n  const [editingIssueId, setEditingIssueId] = useState();\n  const [author_association, setAuthorAssociation] = useState();\n  //add issue\n  const [showForm, setShowForm] = useState(false);\n  const [title, setTitle] = useState('');\n  const [content, setContent] = useState('');\n\n\n  useEffect(() => {\n    const queryString = window.location.search;\n    const urlParams = new URLSearchParams(queryString);\n    const codeParam = urlParams.get(\"code\");\n  \n    if (codeParam && localStorage.getItem(\"accessToken\") === null) {\n      async function getAccessToken() {\n        await fetch('http://localhost:4000/getAccessToken?code=' + codeParam, {\n          method: 'GET'\n        }).then((response) => {\n          // console.log(response);\n          return response.json();\n        }).then((data) => {      \n          // console.log(data);\n          if (data.access_token) {          \n            localStorage.setItem('accessToken', data.access_token);\n            setRerender(!rerender);\n          }\n        });\n      }\n      getAccessToken();\n    } else {\n      getUserData();\n    }\n  }, []); //rerender\n  \n  \n  useEffect(() => {\n    if (localStorage.getItem('accessToken')) {\n      getUserData();\n    }\n  }, [localStorage.getItem('accessToken')]);\n\n  // const getUserData = async () => {\n  //   try {\n  //     const accessToken = localStorage.getItem('accessToken');\n  //     const response = await fetch(`http://localhost:4000/getUserData`, {\n  //       method: 'GET',\n  //       headers: {\n  //         'Authorization': `Bearer ${accessToken}`\n  //       }\n  //     });\n  //     const data = await response.json();\n  //     const octokit = new Octokit({ auth: accessToken });\n  //     const repositoriesResponse = await octokit.request('GET /user/repos');\n  //     setRepositories(repositoriesResponse.data);\n  //     setUserData(data);\n  //   } catch (error) {\n  //     handleError(error);\n  //   }\n  // };\n  const getUserData = async () => {\n    try {\n      const accessToken = localStorage.getItem('accessToken');\n      const response = await fetch(`http://localhost:4000/getUserData`, {\n        method: 'GET',\n        headers: {\n          'Authorization': `Bearer ${accessToken}`\n        }\n      });\n      const data = await response.json();\n      const octokit = new Octokit({ auth: accessToken });\n      const repositoriesResponse = await octokit.request('GET /users/:username/repos', {\n        username: 'babupersonal',\n      });\n      \n      setRepositories(repositoriesResponse.data);\n      setUserData(data);\n    } catch (error) {\n      handleError(error);\n    }\n  };\n\n  const getIssues = async (repoName, owner) => {\n    try {\n        const accessToken = localStorage.getItem('accessToken');\n        const octokit = new Octokit({ auth: accessToken });\n        const issueResponse = await octokit.request(`GET /repos/${owner}/${repoName}/issues`, {\n            per_page: PER_PAGE,\n        });\n  \n        for (const issueItem of issueResponse.data) {\n            const commentsResponse = await octokit.request(`GET /repos/${owner}/${repoName}/issues/${issueItem.number}/comments`);\n            const comments = commentsResponse.data.filter(comment => comment.body); // 排除空评论\n            issueItem.comments = comments;\n            issueItem.body = issueItem.body; // 将评论内容赋值给 body\n        }\n  \n        const filteredIssues = issueResponse.data.map(issueItem => ({\n            ...issueItem,\n            comments: issueItem.comments.filter(comment => comment.body.trim() !== '')\n        }));\n  \n        setIssue(prevIssue => [...prevIssue, ...filteredIssues]);\n        setLoading(false);\n    } catch (error) {\n        handleError(error);\n    }\n  };\n  \n\n  //滾輪偵測文章載入\n  const handleScroll = throttle(async (e) => {\n    const container = e.target;\n    const bottom = container.scrollHeight - container.scrollTop === container.clientHeight;\n    if (bottom && !loading && owner && repoName) {\n      setLoading(true);\n  \n      const accessToken = localStorage.getItem('accessToken');\n      const octokit = new Octokit({ auth: accessToken });\n  \n      try {\n        const repoInfoResponse = await octokit.request(`GET /repos/${owner}/${repoName}`);\n        const totalIssues = repoInfoResponse.data.open_issues_count;\n        const currentIssuesCount = issue.length;\n\n        if (currentIssuesCount >= totalIssues) {\n          setLoading(false);\n          return;\n        }\n  \n        const nextPage = Math.ceil(currentIssuesCount / PER_PAGE) + 1;\n  \n        const issueResponse = await octokit.request(`GET /repos/${owner}/${repoName}/issues`, {\n          per_page: PER_PAGE,\n          page: nextPage\n      });\n        const newIssues = issueResponse.data.map(issueItem => ({\n          ...issueItem,\n          comments: []\n      }));\n        // console.log(totalIssues);\n        // console.log(currentIssuesCount);\n        // console.log(nextPage);\n\n        setIssue(prevIssue => [...prevIssue, ...newIssues]);\n        setLoading(false);\n      } catch (error) {\n        console.error('Error fetching additional issues:', error);\n        setLoading(false);\n      }\n    }\n  }, 500);\n     \n  const parseMarkdown = (markdownContent) => {\n    return markdownContent; \n  };\n  \n  function logingithub() {\n    window.location.assign(\n      `https://github.com/login/oauth/authorize?client_id=${CLIENT_ID}&scope=repo%20read:user%20write:discussion%20repo:status%20write:repo`\n    );\n  }\n  const handleError = (error) => {\n    console.error('Error:', error);\n  };\n  // 删除文章\n  // const DeleteIssue = async (issueId) => {\n  //   if (window.confirm('Are you sure you want to delete this issue?')) {\n  //     try {\n  //       const editedIssue = issue.find(item => item.id === issueId);\n  //       if (!editedIssue) {\n  //         console.error('Edited issue not found in the issue array.');\n  //         return;\n  //       }\n  //       const accessToken = localStorage.getItem('accessToken');\n  //       const octokit = new Octokit({ auth: accessToken });\n  \n  //       // 使用 GitHub REST API 删除 Issue\n  //       await octokit.request(`DELETE /repos/${owner}/${repoName}/issues/${editedIssue.number}`, {\n  //         headers: {\n  //           Authorization: `token ${accessToken}`\n  //         }\n  //       });\n  \n  //       // 从 issue 状态中移除被删除的 Issue\n  //       setIssue(prevIssue => prevIssue.filter(issueItem => issueItem.id !== issueId));\n  //     } catch (error) {\n  //       handleError(error);\n  //     }\n  //   }\n  // }\n  //編輯文章\n  const EditingCompleted = async (id, title, content) => {\n    const editedIssue = issue.find(item => item.id === id);\n    if (!editedIssue) return;\n    if (!title.trim()) {\n      window.confirm('請輸入標題');\n      return;\n    }\n    if (content.trim().length < 30) {\n      window.confirm('至少輸入30個字元');\n        return;\n    }\n    if (editedIssue.title === title && editedIssue.body === content) {\n      setEditingIssueId(null);\n      return;\n    } \n  \n    try {\n      const accessToken = PersonalAccessToken;\n      if (!accessToken) {\n        console.error('Access token not found.');\n        return;\n      }\n      const octokit = new Octokit({ auth: accessToken });\n      if (!owner || !repoName) {\n        console.error('Owner or repoName not found.');\n        return;\n      }\n      if (editedIssue.author_association === \"OWNER\") {\n      const response = await octokit.request(`PATCH /repos/${owner}/${repoName}/issues/${editedIssue.number}`, {\n        title: title,\n        body: content\n      });\n        \n      // 输出编辑成功的信息\n      console.log('Editing completed successfully:', response.data);\n        \n      // 更新 issue 状态中对应 Issue 的内容\n      setIssue(prevIssue => {\n        return prevIssue.map(issueItem => {\n          if (issueItem.id === editedIssue.id) {\n            return { ...issueItem, title: title, body: content };\n          }\n          return issueItem;\n        });\n      });\n      setEditingIssueId(null);\n    }\n  } catch (error) {\n    handleError(error);\n  }\n};\n  \n  //  取消編輯\n  const CancelEdit = async () => {\n    setEditingIssueId(null);\n  }\n  //新增文章\n  const handleSubmit = async () => {\n    try {\n      const accessToken = PersonalAccessToken;\n      console.log(accessToken);\n      if (!accessToken) {\n        console.error('Access token not found.');\n        return;\n      }\n      const selectedRepo = repositories.find(repo => repo.name === repoName);\n      if (!selectedRepo) {\n        console.error(`Repository with name ${repoName} not found.`);\n        return;\n      }\n      if (!title.trim()) {\n        window.confirm('請輸入標題');\n        return;\n      }\n      if (content.trim().length < 30) {\n        window.confirm('至少輸入30個字元');\n          return;\n      }\n      const newIssue = {\n        title: title,\n        body: content,\n        comments: [] \n      };\n      const url = `https://api.github.com/repos/${owner}/${repoName}/issues`;\n  \n      const response = await fetch(url, {\n        method: 'POST',\n        headers: {\n          'Authorization': `Bearer ${accessToken}`,\n          'Content-Type': 'application/json',\n          'Accept': 'application/json',\n        },\n        body: JSON.stringify(newIssue),\n      });\n  \n      const responseData = await response.json();\n  \n      if (response.ok) {\n        console.log('Issue created successfully:', responseData);\n        setIssue(prevIssue => [responseData, ...prevIssue]);\n        setTitle('');\n        setContent('');\n      } else {\n        console.error(responseData);\n      }\n    } catch (error) {\n      handleError(error);\n    }\n  };\n\n  const [isOpen, setIsOpen] = useState(false); // 初始化 isOpen 和 setIsOpen\n\n  const toggleMenu = () => {\n    setIsOpen(!isOpen);\n  };\n\n  return (\n    <div className=\"App\">\n      <header className=\"App-header\">\n        {localStorage.getItem('accessToken') ?\n          <>\n            <FontAwesomeIcon\n              className={`setting ${isOpen ? 'rotate' : ''}`}\n              onClick={toggleMenu}\n              icon={faGear}\n            />\n            <div className={`menu ${isOpen ? 'open' : ''}`}>\n              <nav className='c cc'>\n                <button onClick={() => { localStorage.removeItem('accessToken'); setRerender(!rerender); }}>Log out</button>\n              </nav>\n            </div>\n            <div>\n              <h2 className='py-4'>Welcome babupersonal Repositories:</h2>\n              <div className='repo'>\n              {repositories.length > 0 && repositories.map((repo, index) => (\n                <button\n                  className='repo-list'\n                  key={index}\n                  onClick={() => {\n                    setIssue([]); \n                    const selectedRepo = repositories[index]; // 获取所选仓库\n                    setRepoName(selectedRepo.name); // 更新所选仓库的名称状态\n                    setOwner(selectedRepo.owner.login); // 更新所选仓库的所有者状态\n                    getIssues(selectedRepo.name, selectedRepo.owner.login); \n                    setShowForm(true);\n                  }}\n                >\n                  {repo.name}\n                </button>\n              ))}\n              </div>\n            </div>\n            <div className='c py-3'>\n              <h3>{repoName ? `${repoName} Issue:` : 'Issue'}</h3>\n            </div>\n            <div className='issue-list' onScroll={handleScroll}>\n            {issue.length > 0 ? (\n              issue.map((issueItem, index) => (\n                <div className='issues' key={index}>\n                  {editingIssueId === issueItem.id ? (\n                    <div className='issue-column'>\n                      <div className='c col-12' >\n                      <h3 className='col-lg-3'>Issue Title</h3>\n                      <textarea \n                        className='issue-area col-lg-9'\n                        value={editingIssueId === issueItem.id ? editedTitle : issueItem.title}\n                        onChange={(e) => {\n                          if (editingIssueId === issueItem.id) {\n                            setEditedTitle(e.target.value);\n                          } else {\n                            setIssue(prevIssue => {\n                              return prevIssue.map(item => {\n                                if (item.id === issueItem.id) {\n                                  return { ...item, title: e.target.value };\n                                }\n                                return item;\n                              });\n                            });\n                          }\n                        }}\n                      />\n                      </div>\n                      < div className='c col-12'>\n                        <h3 className='col-lg-3'>Issue Content</h3>\n                        <textarea \n                          className='issue-area col-lg-9'\n                          value={editingIssueId === issueItem.id ? editedContent : issueItem.body}\n                          onChange={(e) => {\n                            if (editingIssueId === issueItem.id) {\n                              setEditedContent(e.target.value);\n                            } else {\n                              setIssue(prevIssue => {\n                                return prevIssue.map(item => {\n                                  if (item.id === issueItem.id) {\n                                    return { ...item, body: e.target.value };\n                                  }\n                                  return item;\n                                });\n                              });\n                            }\n                          }}\n                        />\n                      </div>\n                        <div className='c'>\n                          <button className='btn issue-btn' onClick={() => EditingCompleted(issueItem.id, editedTitle, editedContent)}>完成編輯</button>\n                          <button className='btn issue-btn' onClick={() => CancelEdit(issueItem.id)}>取消編輯</button>\n                        </div>\n                    </div>\n                  ) : (\n                    <div className='c issue-out'>\n                      <div className='c cc w-100'>\n                        <div className='issue-title'><Markdown>{parseMarkdown(`${index + 1}: ${issueItem.title}`)}</Markdown></div>\n                        <div className='c w-100'>\n                          <div className='issue-content'><Markdown>{parseMarkdown(`${issueItem.body}`)}</Markdown></div>\n                          <div className='issue-msg-out'>\n                            <div className='issue-msg'>\n                            {issueItem.comments && issueItem.comments.map((comment, commentIndex) => (\n                                comment.body.trim() !== '' && <div className='msg-list' key={commentIndex}><Markdown>{parseMarkdown(comment.body)}</Markdown></div>\n                            ))}\n                            </div>\n                          </div>\n                        </div>\n                        {issueItem.author_association === \"OWNER\" && userData.login === \"babupersonal\" && (\n                          <>\n                          <button className='btn issue-btn' onClick={() => {\n                            setEditedTitle(issueItem.title);\n                            setEditedContent(issueItem.body);\n                            setEditingIssueId(issueItem.id);\n                          }}>編輯</button>\n                          {/* <button className='btn issue-btn' onClick={() => DeleteIssue(issueItem.id)}>刪除</button> */}\n                          </>\n                        )}\n                      </div>\n                    </div>\n                  )}\n                </div>\n              ))\n            ) : (\n              <p>No issues</p>\n            )}\n            {loading && <p>Loading...</p>}\n          </div>\n          {/* {issue.length > 0 && ( */}\n            <div className='add-issue'>\n              {issue.some(issueItem => issueItem.author_association === \"OWNER\" && userData.login === \"babupersonal\" && showForm) && (\n                <div className='c cc'>\n                  <h3 className='py-3'>Add a new {repoName} Issue</h3>\n                  <textarea \n                    placeholder='輸入標題' \n                    value={title} \n                    onChange={(e) => setTitle(e.target.value)}\n                  ></textarea>\n                  <textarea \n                    placeholder='輸入內容' \n                    value={content}\n                    onChange={(e) => setContent(e.target.value)}\n                  ></textarea>\n                  <div>\n                    <button className='btn issue-btn' type=\"button\" onClick={handleSubmit}>新增</button>\n                    {/* <button type=\"button\" onClick={closeModal}>關閉</button> */}\n                  </div>\n                </div>\n              )}\n            </div>\n          {/* )} */}\n       \n          </>\n          :\n          <>\n            <div className='login-img'>\n              <div className='effect c'>\n                <button className='btn' onClick={logingithub}>Login With Github</button>\n              </div>\n            </div>\n          </>\n        }\n\n      </header>\n    </div>\n  );\n\n}\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}