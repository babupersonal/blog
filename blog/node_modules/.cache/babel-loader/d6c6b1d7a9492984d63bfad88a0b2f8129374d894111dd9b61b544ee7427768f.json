{"ast":null,"code":"var _jsxFileName = \"/Users/babu/Desktop/client/blog/src/App.js\",\n  _s2 = $RefreshSig$();\nimport './App.css';\nimport { useEffect, useState } from 'react';\nimport { Octokit } from '@octokit/core';\nimport Markdown from 'marked-react';\n// import Modal from 'react-modal'\nimport throttle from 'lodash/throttle';\n// import dotenv from 'dotenv';\n// dotenv.config();\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst CLIENT_ID = 'Iv1.5f95480a214aafea';\n// const { personalToken } = process.env;\nconst PersonalAccessToken = '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';\nconst accessToken = 'ghu_nG2TzraDljU7mdOajTQUhuct2sMTbB3Lr724';\nconst PER_PAGE = 10;\nfunction App() {\n  _s2();\n  var _s = $RefreshSig$();\n  const [rerender, setRerender] = useState(false);\n  const [userData, setUserData] = useState({});\n  const [repositories, setRepositories] = useState([]);\n  //issue\n  const [issue, setIssue] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [repoName, setRepoName] = useState('');\n  const [owner, setOwner] = useState('');\n  const [editedTitle, setEditedTitle] = useState('');\n  const [editedContent, setEditedContent] = useState('');\n  const [editingIssueId, setEditingIssueId] = useState();\n  const [author_association, setAuthorAssociation] = useState();\n  //add issue\n  const [showForm, setShowForm] = useState(false);\n  const [title, setTitle] = useState('');\n  const [content, setContent] = useState('');\n  useEffect(() => {\n    const queryString = window.location.search;\n    const urlParams = new URLSearchParams(queryString);\n    const codeParam = urlParams.get(\"code\");\n    if (codeParam && localStorage.getItem(\"accessToken\") === null) {\n      console.log('test1');\n      async function getAccessToken() {\n        await fetch('http://localhost:4000/getAccessToken?code=' + codeParam, {\n          method: 'GET'\n        }).then(response => {\n          console.log(response);\n          return response.json();\n        }).then(data => {\n          console.log(data);\n          if (data.access_token) {\n            localStorage.setItem('accessToken', data.access_token);\n            setRerender(!rerender);\n          }\n        });\n      }\n      getAccessToken();\n    } else {\n      console.log('test2');\n      getUserData();\n    }\n  }, []); //rerender\n\n  useEffect(() => {\n    if (localStorage.getItem('accessToken')) {\n      getUserData();\n    }\n  }, [localStorage.getItem('accessToken')]);\n\n  // const getUserData = async () => {\n  //   try {\n  //     const accessToken = localStorage.getItem('accessToken');\n  //     const response = await fetch(`http://localhost:4000/getUserData`, {\n  //       method: 'GET',\n  //       headers: {\n  //         'Authorization': `Bearer ${accessToken}`\n  //       }\n  //     });\n  //     const data = await response.json();\n  //     const octokit = new Octokit({ auth: accessToken });\n  //     const repositoriesResponse = await octokit.request('GET /user/repos');\n  //     setRepositories(repositoriesResponse.data);\n  //     setUserData(data);\n  //   } catch (error) {\n  //     handleError(error);\n  //   }\n  // };\n  const UserProfile = ({\n    userId,\n    setRepositories,\n    setUserData,\n    handleError\n  }) => {\n    _s();\n    useEffect(() => {\n      const getUserData = async () => {\n        try {\n          // Fetch user data\n          const response = await fetch(`http://localhost:4000/getUserData/${userId}`, {\n            method: 'GET'\n          });\n          const data = await response.json();\n\n          // Fetch repositories for the specified user\n          const repositoriesResponse = await fetch(`http://localhost:4000/getUserRepositories/${userId}`, {\n            method: 'GET'\n          });\n          const repositoriesData = await repositoriesResponse.json();\n\n          // Update state with fetched data\n          setRepositories(repositoriesData);\n          setUserData(data);\n        } catch (error) {\n          handleError(error);\n        }\n      };\n      getUserData();\n    }, [userId, setRepositories, setUserData, handleError]);\n  };\n  _s(UserProfile, \"OD7bBpZva5O2jO+Puf00hKivP7c=\");\n  const getUserData = async userId => {\n    try {\n      // Fetch user data\n      const response = await fetch(`http://localhost:4000/getUserData/${userId}`, {\n        method: 'GET'\n      });\n      const data = await response.json();\n\n      // Fetch repositories for the specified user\n      const repositoriesResponse = await fetch(`http://localhost:4000/getUserRepositories/${userId}`, {\n        method: 'GET'\n      });\n      const repositoriesData = await repositoriesResponse.json();\n\n      // Update state with fetched data\n      setRepositories(repositoriesData);\n      setUserData(data);\n    } catch (error) {\n      handleError(error);\n    }\n  };\n  //得到文章&留言\n  const getIssues = async (repoName, owner) => {\n    try {\n      const accessToken = localStorage.getItem('accessToken');\n      const octokit = new Octokit({\n        auth: accessToken\n      });\n      const issueResponse = await octokit.request(`GET /repos/${owner}/${repoName}/issues`, {\n        per_page: PER_PAGE\n      });\n      //msg\n      for (const issueItem of issueResponse.data) {\n        const commentsResponse = await octokit.request(`GET /repos/${owner}/${repoName}/issues/${issueItem.number}/comments`);\n        issueItem.comments = commentsResponse.data;\n      }\n      setIssue(prevIssue => [...prevIssue, ...issueResponse.data]);\n      setLoading(false);\n    } catch (error) {\n      handleError(error);\n    }\n  };\n  //滾輪偵測文章載入\n  const handleScroll = throttle(async e => {\n    const container = e.target;\n    const bottom = container.scrollHeight - container.scrollTop === container.clientHeight;\n    if (bottom && !loading && owner && repoName) {\n      setLoading(true);\n      const accessToken = localStorage.getItem('accessToken');\n      const octokit = new Octokit({\n        auth: accessToken\n      });\n      try {\n        const repoInfoResponse = await octokit.request(`GET /repos/${owner}/${repoName}`);\n        const totalIssues = repoInfoResponse.data.open_issues_count;\n        const currentIssuesCount = issue.length;\n        if (currentIssuesCount >= totalIssues) {\n          setLoading(false);\n          return;\n        }\n        const nextPage = Math.ceil(currentIssuesCount / PER_PAGE) + 1;\n        const issueResponse = await octokit.request(`GET /repos/${owner}/${repoName}/issues`, {\n          per_page: PER_PAGE,\n          page: nextPage\n        });\n        setIssue(prevIssue => [...prevIssue, ...issueResponse.data]);\n        setLoading(false);\n      } catch (error) {\n        console.error('Error fetching additional issues:', error);\n        setLoading(false);\n      }\n    }\n  }, 500);\n  const parseMarkdown = markdownContent => {\n    return markdownContent;\n  };\n  function logingithub() {\n    window.location.assign(`https://github.com/login/oauth/authorize?client_id=${CLIENT_ID}&scope=repo%20read:user%20write:discussion%20repo:status%20write:repo`);\n  }\n  const handleError = error => {\n    console.error('Error:', error);\n  };\n  // 删除文章\n  const DeleteIssue = async issueId => {\n    if (window.confirm('Are you sure you want to delete this issue?')) {\n      try {\n        const editedIssue = issue.find(item => item.id === issueId);\n        if (!editedIssue) {\n          console.error('Edited issue not found in the issue array.');\n          return;\n        }\n        const accessToken = localStorage.getItem('accessToken');\n        const octokit = new Octokit({\n          auth: accessToken\n        });\n\n        // 使用 GitHub REST API 删除 Issue\n        const issueIndex = issue.indexOf(editedIssue);\n        await octokit.request(`DELETE /repos/${owner}/${repoName}/issues/${issueIndex + 1}`);\n\n        // 从 issue 状态中移除被删除的 Issue\n        setIssue(prevIssue => prevIssue.filter(issueItem => issueItem.id !== issueId));\n      } catch (error) {\n        handleError(error);\n      }\n    }\n  };\n  //編輯完成\n  const EditingCompleted = async () => {\n    const editedIssue = issue.find(item => item.id === editingIssueId);\n    if (!editedIssue) return;\n    if (editedIssue.title === editedTitle && editedIssue.body === editedContent) {\n      setEditingIssueId(null);\n      return;\n    }\n    try {\n      const accessToken = PersonalAccessToken;\n      if (!accessToken) {\n        console.error('Access token not found.');\n        return;\n      }\n      const octokit = new Octokit({\n        auth: accessToken\n      });\n      if (!owner || !repoName) {\n        console.error('Owner or repoName not found.');\n        return;\n      }\n      const issueIndex = issue.indexOf(editedIssue);\n      if (editedIssue.author_association === \"OWNER\") {\n        const response = await octokit.request(`PATCH /repos/${owner}/${repoName}/issues/${issueIndex + 1}`, {\n          title: editedTitle,\n          body: editedContent\n        });\n\n        // 更新 issue 状态中对应 Issue 的内容\n        setIssue(prevIssue => {\n          return prevIssue.map(issueItem => {\n            if (issueItem.id === editedIssue.id) {\n              return {\n                ...issueItem,\n                title: editedTitle,\n                body: editedContent\n              };\n            }\n            return issueItem;\n          });\n        });\n        setEditingIssueId(null);\n      }\n    } catch (error) {\n      handleError(error);\n    }\n  };\n\n  //  取消編輯\n  const CancelEdit = async () => {\n    setEditingIssueId(null);\n  };\n\n  // const closeModal = () => {\n  //   setShowForm(false);\n  // };\n  //新增文章\n  const handleSubmit = async () => {\n    try {\n      const accessToken = PersonalAccessToken;\n      console.log(accessToken);\n      if (!accessToken) {\n        console.error('Access token not found.');\n        return;\n      }\n      const selectedRepo = repositories.find(repo => repo.name === repoName);\n      if (!selectedRepo) {\n        console.error(`Repository with name ${repoName} not found.`);\n        return;\n      }\n\n      // console.log(accessToken);\n      // console.log(owner);\n      // console.log(repoName);\n      const url = `https://api.github.com/repos/${owner}/${repoName}/issues`;\n      const response = await fetch(url, {\n        method: 'POST',\n        headers: {\n          'Authorization': `Bearer ${accessToken}`,\n          'Content-Type': 'application/json',\n          'Accept': 'application/json'\n        },\n        body: JSON.stringify({\n          title: title,\n          body: content\n        })\n      });\n      const responseData = await response.json();\n      if (response.ok) {\n        console.log('Issue created successfully:', responseData);\n        setIssue(prevIssue => [responseData, ...prevIssue]);\n      } else {\n        console.error(responseData);\n      }\n    } catch (error) {\n      handleError(error);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"App\",\n    children: /*#__PURE__*/_jsxDEV(\"header\", {\n      className: \"App-header\",\n      children: localStorage.getItem('accessToken') ? /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"We have the access token\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 333,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => {\n            localStorage.removeItem('accessToken');\n            setRerender(!rerender);\n          },\n          children: \"Log out\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 334,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: \"Your Repositories:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 337,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"repo\",\n            children: repositories.length > 0 && repositories.map((repo, index) => /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"repo-list\",\n              onClick: () => {\n                setIssue([]);\n                const selectedRepo = repositories[index]; // 获取所选仓库\n                setRepoName(selectedRepo.name); // 更新所选仓库的名称状态\n                setOwner(selectedRepo.owner.login); // 更新所选仓库的所有者状态\n                getIssues(selectedRepo.name, selectedRepo.owner.login);\n                setShowForm(true);\n              },\n              children: repo.name\n            }, index, false, {\n              fileName: _jsxFileName,\n              lineNumber: 340,\n              columnNumber: 17\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 338,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 336,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"c\",\n          children: /*#__PURE__*/_jsxDEV(\"h3\", {\n            children: repoName ? `${repoName} Issue:` : 'Issue'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 358,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 357,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"issue-list\",\n          onScroll: handleScroll,\n          children: [issue.length > 0 ? issue.map((issueItem, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"issues\",\n            children: editingIssueId === issueItem.id ? /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"issue-column\",\n              children: [/*#__PURE__*/_jsxDEV(\"textarea\", {\n                className: \"issue-area\",\n                value: editingIssueId === issueItem.id ? editedTitle : issueItem.title,\n                onChange: e => {\n                  if (editingIssueId === issueItem.id) {\n                    setEditedTitle(e.target.value);\n                  } else {\n                    setIssue(prevIssue => {\n                      return prevIssue.map(item => {\n                        if (item.id === issueItem.id) {\n                          return {\n                            ...item,\n                            title: e.target.value\n                          };\n                        }\n                        return item;\n                      });\n                    });\n                  }\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 367,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n                className: \"issue-area\",\n                value: editingIssueId === issueItem.id ? editedContent : issueItem.body,\n                onChange: e => {\n                  if (editingIssueId === issueItem.id) {\n                    setEditedContent(e.target.value);\n                  } else {\n                    setIssue(prevIssue => {\n                      return prevIssue.map(item => {\n                        if (item.id === issueItem.id) {\n                          return {\n                            ...item,\n                            body: e.target.value\n                          };\n                        }\n                        return item;\n                      });\n                    });\n                  }\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 385,\n                columnNumber: 23\n              }, this), userData === userData.login( /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"btn issue-btn\",\n                  onClick: () => EditingCompleted(issueItem.id, editedTitle, editedContent),\n                  children: \"\\u5B8C\\u6210\\u7DE8\\u8F2F\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 405,\n                  columnNumber: 27\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"btn issue-btn\",\n                  onClick: () => CancelEdit(issueItem.id),\n                  children: \"\\u53D6\\u6D88\\u7DE8\\u8F2F\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 406,\n                  columnNumber: 27\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 404,\n                columnNumber: 25\n              }, this))]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 366,\n              columnNumber: 21\n            }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"c issue-out\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"c cc issue-item\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"issue-title\",\n                  children: /*#__PURE__*/_jsxDEV(Markdown, {\n                    children: parseMarkdown(`${index + 1}: ${issueItem.title}`)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 414,\n                    columnNumber: 54\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 414,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"issue-content\",\n                  children: /*#__PURE__*/_jsxDEV(Markdown, {\n                    children: parseMarkdown(`${issueItem.body}`)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 415,\n                    columnNumber: 56\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 415,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                    className: \"btn issue-btn\",\n                    onClick: EditIssue => {\n                      setEditedTitle(issueItem.title);\n                      setEditedContent(issueItem.body);\n                      setEditingIssueId(issueItem.id);\n                    },\n                    children: \"\\u7DE8\\u8F2F\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 417,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                    className: \"btn issue-btn\",\n                    onClick: () => DeleteIssue(issueItem.id),\n                    children: \"\\u522A\\u9664\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 422,\n                    columnNumber: 27\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 416,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 413,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"issue-msg-out\",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"issue-msg\",\n                  children: issueItem.comments.map((comment, commentIndex) => /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"msg-list\",\n                    children: comment.body\n                  }, commentIndex, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 428,\n                    columnNumber: 27\n                  }, this))\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 426,\n                  columnNumber: 25\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 425,\n                columnNumber: 23\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 412,\n              columnNumber: 21\n            }, this)\n          }, index, false, {\n            fileName: _jsxFileName,\n            lineNumber: 364,\n            columnNumber: 17\n          }, this)) : /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"No issues\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 437,\n            columnNumber: 15\n          }, this), loading && /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"Loading...\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 439,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 361,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: showForm && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"c cc\",\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              children: [\"\\u65B0\\u589E \", repoName, \" Issue\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 444,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n              placeholder: \"\\u8F38\\u5165\\u6A19\\u984C\",\n              value: title,\n              onChange: e => setTitle(e.target.value)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 445,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n              placeholder: \"\\u8F38\\u5165\\u5167\\u5BB9\",\n              value: content,\n              onChange: e => setContent(e.target.value)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 450,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: /*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"button\",\n                onClick: handleSubmit,\n                children: \"\\u65B0\\u589E\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 456,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 455,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 443,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 441,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"User is not logged in\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 467,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: logingithub,\n            children: \"Login With Github\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 469,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 468,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 330,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 329,\n    columnNumber: 5\n  }, this);\n}\n_s2(App, \"HsDZJ0dYPVYm3wGrJaxcw3MZeNc=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["useEffect","useState","Octokit","Markdown","throttle","jsxDEV","_jsxDEV","Fragment","_Fragment","CLIENT_ID","PersonalAccessToken","accessToken","PER_PAGE","App","_s2","_s","$RefreshSig$","rerender","setRerender","userData","setUserData","repositories","setRepositories","issue","setIssue","loading","setLoading","repoName","setRepoName","owner","setOwner","editedTitle","setEditedTitle","editedContent","setEditedContent","editingIssueId","setEditingIssueId","author_association","setAuthorAssociation","showForm","setShowForm","title","setTitle","content","setContent","queryString","window","location","search","urlParams","URLSearchParams","codeParam","get","localStorage","getItem","console","log","getAccessToken","fetch","method","then","response","json","data","access_token","setItem","getUserData","UserProfile","userId","handleError","repositoriesResponse","repositoriesData","error","getIssues","octokit","auth","issueResponse","request","per_page","issueItem","commentsResponse","number","comments","prevIssue","handleScroll","e","container","target","bottom","scrollHeight","scrollTop","clientHeight","repoInfoResponse","totalIssues","open_issues_count","currentIssuesCount","length","nextPage","Math","ceil","page","parseMarkdown","markdownContent","logingithub","assign","DeleteIssue","issueId","confirm","editedIssue","find","item","id","issueIndex","indexOf","filter","EditingCompleted","body","map","CancelEdit","handleSubmit","selectedRepo","repo","name","url","headers","JSON","stringify","responseData","ok","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","removeItem","index","login","onScroll","value","onChange","EditIssue","comment","commentIndex","placeholder","type","_c","$RefreshReg$"],"sources":["/Users/babu/Desktop/client/blog/src/App.js"],"sourcesContent":["import './App.css';\nimport { useEffect, useState } from 'react';\nimport { Octokit } from '@octokit/core';\nimport Markdown from 'marked-react';\n// import Modal from 'react-modal'\nimport throttle from 'lodash/throttle';\n// import dotenv from 'dotenv';\n// dotenv.config();\n\nconst CLIENT_ID = 'Iv1.5f95480a214aafea';\n// const { personalToken } = process.env;\nconst PersonalAccessToken  = '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';\nconst accessToken = 'ghu_nG2TzraDljU7mdOajTQUhuct2sMTbB3Lr724';\nconst PER_PAGE = 10;\n\nfunction App() {\n\n  const [rerender, setRerender] = useState(false);\n  const [userData, setUserData] = useState({});\n  const [repositories, setRepositories] = useState([]);\n  //issue\n  const [issue, setIssue] = useState([]);\n  const [loading, setLoading] = useState(false); \n  const [repoName, setRepoName] = useState('');\n  const [owner, setOwner] = useState('');\n  const [editedTitle, setEditedTitle] = useState('');\n  const [editedContent, setEditedContent] = useState('');\n  const [editingIssueId, setEditingIssueId] = useState();\n  const [author_association, setAuthorAssociation] = useState();\n  //add issue\n  const [showForm, setShowForm] = useState(false);\n  const [title, setTitle] = useState('');\n  const [content, setContent] = useState('');\n\n\n  useEffect(() => {\n    const queryString = window.location.search;\n    const urlParams = new URLSearchParams(queryString);\n    const codeParam = urlParams.get(\"code\");\n  \n    if (codeParam && localStorage.getItem(\"accessToken\") === null) {\n      console.log('test1');\n      async function getAccessToken() {\n        await fetch('http://localhost:4000/getAccessToken?code=' + codeParam, {\n          method: 'GET'\n        }).then((response) => {\n          console.log(response);\n          return response.json();\n        }).then((data) => {      \n          console.log(data);\n          if (data.access_token) {          \n            localStorage.setItem('accessToken', data.access_token);\n            setRerender(!rerender);\n          }\n        });\n      }\n      getAccessToken();\n    } else {\n      console.log('test2');\n      getUserData();\n    }\n  }, []); //rerender\n  \n  \n  useEffect(() => {\n    if (localStorage.getItem('accessToken')) {\n      getUserData();\n    }\n  }, [localStorage.getItem('accessToken')]);\n\n  \n\n  // const getUserData = async () => {\n  //   try {\n  //     const accessToken = localStorage.getItem('accessToken');\n  //     const response = await fetch(`http://localhost:4000/getUserData`, {\n  //       method: 'GET',\n  //       headers: {\n  //         'Authorization': `Bearer ${accessToken}`\n  //       }\n  //     });\n  //     const data = await response.json();\n  //     const octokit = new Octokit({ auth: accessToken });\n  //     const repositoriesResponse = await octokit.request('GET /user/repos');\n  //     setRepositories(repositoriesResponse.data);\n  //     setUserData(data);\n  //   } catch (error) {\n  //     handleError(error);\n  //   }\n  // };\n  const UserProfile = ({ userId, setRepositories, setUserData, handleError }) => {\n    useEffect(() => {\n      const getUserData = async () => {\n        try {\n          // Fetch user data\n          const response = await fetch(`http://localhost:4000/getUserData/${userId}`, {\n            method: 'GET'\n          });\n          const data = await response.json();\n      \n          // Fetch repositories for the specified user\n          const repositoriesResponse = await fetch(`http://localhost:4000/getUserRepositories/${userId}`, {\n            method: 'GET'\n          });\n          const repositoriesData = await repositoriesResponse.json();\n      \n          // Update state with fetched data\n          setRepositories(repositoriesData);\n          setUserData(data);\n        } catch (error) {\n          handleError(error);\n        }\n      };\n  \n      getUserData();\n    }, [userId, setRepositories, setUserData, handleError]);\n  }  \n  const getUserData = async (userId) => {\n    try {\n      // Fetch user data\n      const response = await fetch(`http://localhost:4000/getUserData/${userId}`, {\n        method: 'GET'\n      });\n      const data = await response.json();\n  \n      // Fetch repositories for the specified user\n      const repositoriesResponse = await fetch(`http://localhost:4000/getUserRepositories/${userId}`, {\n        method: 'GET'\n      });\n      const repositoriesData = await repositoriesResponse.json();\n  \n      // Update state with fetched data\n      setRepositories(repositoriesData);\n      setUserData(data);\n    } catch (error) {\n      handleError(error);\n    }\n  };  \n  //得到文章&留言\n  const getIssues = async (repoName, owner) => {\n    try {\n        const accessToken = localStorage.getItem('accessToken');\n        const octokit = new Octokit({ auth: accessToken });\n        const issueResponse = await octokit.request(`GET /repos/${owner}/${repoName}/issues`, {\n            per_page: PER_PAGE,\n        });\n        //msg\n        for (const issueItem of issueResponse.data) {\n          const commentsResponse = await octokit.request(`GET /repos/${owner}/${repoName}/issues/${issueItem.number}/comments`);\n          issueItem.comments = commentsResponse.data;\n        }\n\n        setIssue(prevIssue => [...prevIssue, ...issueResponse.data]);\n        setLoading(false);\n    } catch (error) {\n      handleError(error);\n    }\n  };\n  //滾輪偵測文章載入\n  const handleScroll = throttle(async (e) => {\n    const container = e.target;\n    const bottom = container.scrollHeight - container.scrollTop === container.clientHeight;\n    if (bottom && !loading && owner && repoName) {\n      setLoading(true);\n  \n      const accessToken = localStorage.getItem('accessToken');\n      const octokit = new Octokit({ auth: accessToken });\n  \n      try {\n        const repoInfoResponse = await octokit.request(`GET /repos/${owner}/${repoName}`);\n        const totalIssues = repoInfoResponse.data.open_issues_count;\n  \n        const currentIssuesCount = issue.length;\n  \n        if (currentIssuesCount >= totalIssues) {\n          setLoading(false);\n          return;\n        }\n  \n        const nextPage = Math.ceil(currentIssuesCount / PER_PAGE) + 1;\n  \n        const issueResponse = await octokit.request(`GET /repos/${owner}/${repoName}/issues`, {\n          per_page: PER_PAGE,\n          page: nextPage\n        });\n  \n        setIssue(prevIssue => [...prevIssue, ...issueResponse.data]);\n        setLoading(false);\n      } catch (error) {\n        console.error('Error fetching additional issues:', error);\n        setLoading(false);\n      }\n    }\n  }, 500);\n     \n  const parseMarkdown = (markdownContent) => {\n    return markdownContent; \n  };\n  \n  function logingithub() {\n    window.location.assign(\n      `https://github.com/login/oauth/authorize?client_id=${CLIENT_ID}&scope=repo%20read:user%20write:discussion%20repo:status%20write:repo`\n    );\n  }\n  const handleError = (error) => {\n    console.error('Error:', error);\n  };\n  // 删除文章\n  const DeleteIssue = async (issueId) => {\n    if (window.confirm('Are you sure you want to delete this issue?')) {\n      try {\n        const editedIssue = issue.find(item => item.id === issueId);\n        if (!editedIssue) {\n          console.error('Edited issue not found in the issue array.');\n          return;\n        }\n        const accessToken = localStorage.getItem('accessToken');\n        const octokit = new Octokit({ auth: accessToken });\n  \n        // 使用 GitHub REST API 删除 Issue\n        const issueIndex = issue.indexOf(editedIssue);\n        await octokit.request(`DELETE /repos/${owner}/${repoName}/issues/${issueIndex + 1}`);\n  \n        // 从 issue 状态中移除被删除的 Issue\n        setIssue(prevIssue => prevIssue.filter(issueItem => issueItem.id !== issueId));\n      } catch (error) {\n        handleError(error);\n      }\n    }\n  }\n  //編輯完成\n  const EditingCompleted = async () => {\n    const editedIssue = issue.find(item => item.id === editingIssueId);\n    if (!editedIssue) return;\n    \n    if (editedIssue.title === editedTitle && editedIssue.body === editedContent) {\n      setEditingIssueId(null);\n      return;\n    } \n    try {\n      const accessToken = PersonalAccessToken;\n      if (!accessToken) {\n        console.error('Access token not found.');\n        return;\n      }\n      const octokit = new Octokit({ auth: accessToken });\n      if (!owner || !repoName) {\n        console.error('Owner or repoName not found.');\n        return;\n      }\n      const issueIndex = issue.indexOf(editedIssue);\n      if (editedIssue.author_association === \"OWNER\") {\n        const response = await octokit.request(`PATCH /repos/${owner}/${repoName}/issues/${issueIndex+1}`, {\n          title: editedTitle,\n          body: editedContent\n        });\n        \n        // 更新 issue 状态中对应 Issue 的内容\n        setIssue(prevIssue => {\n          return prevIssue.map(issueItem => {\n            if (issueItem.id === editedIssue.id) {\n              return { ...issueItem, title: editedTitle, body: editedContent };\n            }\n            return issueItem;\n          });\n        });\n        setEditingIssueId(null);\n      }\n    } catch (error) {\n      handleError(error);\n    }\n  };\n\n  //  取消編輯\n  const CancelEdit = async () => {\n    setEditingIssueId(null);\n  }\n\n  // const closeModal = () => {\n  //   setShowForm(false);\n  // };\n  //新增文章\n  const handleSubmit = async () => {\n    try {\n      const accessToken = PersonalAccessToken;\n      console.log(accessToken);\n      if (!accessToken) {\n        console.error('Access token not found.');\n        return;\n      }\n      const selectedRepo = repositories.find(repo => repo.name === repoName);\n      if (!selectedRepo) {\n        console.error(`Repository with name ${repoName} not found.`);\n        return;\n      }\n  \n      // console.log(accessToken);\n      // console.log(owner);\n      // console.log(repoName);\n      const url = `https://api.github.com/repos/${owner}/${repoName}/issues`;\n  \n      const response = await fetch(url, {\n        method: 'POST',\n        headers: {\n          'Authorization': `Bearer ${accessToken}`,\n          'Content-Type': 'application/json',\n          'Accept': 'application/json',\n        },\n        body: JSON.stringify({\n          title: title,\n          body: content\n        }),\n      });\n  \n      const responseData = await response.json();\n  \n      if (response.ok) {\n        console.log('Issue created successfully:', responseData);\n        setIssue(prevIssue => [responseData, ...prevIssue]);\n      } else {\n        console.error(responseData);\n      }\n    } catch (error) {\n      handleError(error);\n    }\n  };\n  \n  return (\n    <div className=\"App\">\n      <header className=\"App-header\">\n        {localStorage.getItem('accessToken') ?\n          <>\n            <h3>We have the access token</h3>\n            <button onClick={() => { localStorage.removeItem('accessToken'); setRerender(!rerender); }}>Log out</button>\n          \n            <div>\n              <h3>Your Repositories:</h3>\n              <div className='repo'>\n              {repositories.length > 0 && repositories.map((repo, index) => (\n                <button\n                  className='repo-list'\n                  key={index}\n                  onClick={() => {\n                    setIssue([]); \n                    const selectedRepo = repositories[index]; // 获取所选仓库\n                    setRepoName(selectedRepo.name); // 更新所选仓库的名称状态\n                    setOwner(selectedRepo.owner.login); // 更新所选仓库的所有者状态\n                    getIssues(selectedRepo.name, selectedRepo.owner.login); \n                    setShowForm(true);\n                  }}\n                >\n                  {repo.name}\n                </button>\n              ))}\n              </div>\n            </div>\n            <div className='c'>\n              <h3>{repoName ? `${repoName} Issue:` : 'Issue'}</h3>\n              {/* <button className='refresh c' onClick={getUserData}>refresh</button> */}\n            </div>\n            <div className='issue-list' onScroll={handleScroll}>\n            {issue.length > 0 ? (\n              issue.map((issueItem, index) => (\n                <div className='issues' key={index}>\n                  {editingIssueId === issueItem.id ? (\n                    <div className='issue-column'>\n                      <textarea \n                        className='issue-area'\n                        value={editingIssueId === issueItem.id ? editedTitle : issueItem.title}\n                        onChange={(e) => {\n                          if (editingIssueId === issueItem.id) {\n                            setEditedTitle(e.target.value);\n                          } else {\n                            setIssue(prevIssue => {\n                              return prevIssue.map(item => {\n                                if (item.id === issueItem.id) {\n                                  return { ...item, title: e.target.value };\n                                }\n                                return item;\n                              });\n                            });\n                          }\n                        }}\n                      />\n                      <textarea \n                        className='issue-area'\n                        value={editingIssueId === issueItem.id ? editedContent : issueItem.body}\n                        onChange={(e) => {\n                          if (editingIssueId === issueItem.id) {\n                            setEditedContent(e.target.value);\n                          } else {\n                            setIssue(prevIssue => {\n                              return prevIssue.map(item => {\n                                if (item.id === issueItem.id) {\n                                  return { ...item, body: e.target.value };\n                                }\n                                return item;\n                              });\n                            });\n                          }\n                        }}\n                      />\n                       {userData  ===  userData.login  (\n                        <div>\n                          <button className='btn issue-btn' onClick={() => EditingCompleted(issueItem.id, editedTitle, editedContent)}>完成編輯</button>\n                          <button className='btn issue-btn' onClick={() => CancelEdit(issueItem.id)}>取消編輯</button>\n                        </div>\n                       )}\n                    </div>\n                   \n                  ) : (\n                    <div className='c issue-out'>\n                      <div className='c cc issue-item'>\n                        <div className='issue-title'><Markdown>{parseMarkdown(`${index + 1}: ${issueItem.title}`)}</Markdown></div>\n                        <div className='issue-content'><Markdown>{parseMarkdown(`${issueItem.body}`)}</Markdown></div>\n                        <div>\n                          <button className='btn issue-btn' onClick={(EditIssue) => {\n                              setEditedTitle(issueItem.title);\n                              setEditedContent(issueItem.body);\n                              setEditingIssueId(issueItem.id);\n                          }}>編輯</button>\n                          <button className='btn issue-btn' onClick={() => DeleteIssue(issueItem.id)}>刪除</button>\n                        </div>\n                      </div>\n                      <div className='issue-msg-out'>\n                        <div className='issue-msg'>\n                        {issueItem.comments.map((comment, commentIndex) => (\n                          <div className='msg-list' key={commentIndex}>{comment.body}</div>\n                        ))}\n                        </div>\n                      </div>\n                    </div>\n                  )}\n                </div>\n              ))\n            ) : (\n              <p>No issues</p>\n            )}\n            {loading && <p>Loading...</p>}\n          </div>\n          <div>\n          {showForm && (\n            <div className='c cc'>\n              <h3>新增 {repoName} Issue</h3>\n              <textarea \n                placeholder='輸入標題' \n                value={title} \n                onChange={(e) => setTitle(e.target.value)}\n              ></textarea>\n              <textarea \n                placeholder='輸入內容' \n                value={content}\n                onChange={(e) => setContent(e.target.value)}\n              ></textarea>\n              <div>\n                <button type=\"button\" onClick={handleSubmit}>新增</button>\n                {/* <button type=\"button\" onClick={closeModal}>關閉</button> */}\n              </div>\n            </div>\n          )}\n          </div>\n\n          {/* <div><ReactModal repoName={repoName} addIssue={addIssue} showModal={showModal} setShowModal={setShowModal} issueId={repoName} /></div> */}\n          </>\n          :\n          <>\n            <h3>User is not logged in</h3>\n            <div>\n              <button onClick={logingithub}>Login With Github</button>\n            </div>\n          </>\n        }\n\n      </header>\n    </div>\n  );\n\n}\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}